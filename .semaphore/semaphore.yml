version: v1.0
name: First Apple Pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: osx-mojave

blocks:
  - name: "Hello"
    task:
      env_vars:
        - name: Test
          value: "hello env vars"

      prologue:
        commands:
          - uname -a
          - ls -lah
          - ls -lah .ssh
          - chmod 0600 ~/.ssh/id_rsa
          - ssh-keyscan github.com >> ~/.ssh/known_hosts
          - git clone git@github.com:/renderedtext/apple-playground && cd apple-playground
          - ls -lah

      jobs:
      - name: Hello1
        commands:
          - sleep 120

      - name: Hello2
        commands:
          - echo 2
