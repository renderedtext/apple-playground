version: v1.0
name: First Apple Pipeline
agent:
  machine:
    type: a1-standard-4
    os_image: macos-mojave

blocks:
  - name: "Hello MacOS"
    task:
      env_vars:
        - name: HOMEBREW_NO_AUTO_UPDATE
          value: "1"

      prologue:
        commands:
          - checkout
          - pwd

      jobs:
      - name: Hello1
        commands:
          - git clone https://github.com/spirotomaso/CleanStore
          - cd CleanStore
          - xcodebuild clean test -project CleanStore.xcodeproj -scheme CleanStore -destination "platform=iOS Simulator,OS=12.2,name=iPhone 8" CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO ONLY_ACTIVE_ARCH=NO -quiet
